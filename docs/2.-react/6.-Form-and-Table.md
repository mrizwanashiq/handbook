---
sidebar_position: 6
id: form-and-table
title: Form and Table
description: Form and Table in React
slug: form-and-table
---


## Creating Form and Table
In this blog, we will learn how to create a form and a table in React. I will use API to get the data from the server, and display it in the table. The form will be used to send the data to the server. 

But if the server is not available, then I will get data from array, default record would be there, and display it in the table. And the form will be used to send the data to the array, and that record will be displayed in the table after the form is submitted. 

But you know array does not have persistence, so the data will be lost when you refresh the page. 

## Basic Setup
Before we start, we need to import the `React` library and the `axios` library.

```js
import React from 'react';
import axios from 'axios';
```

I will `React.useState` and `React.useEffect`. I will also use the `axios` library to make a request to the API. 

### React.useState
First of all, lets use `React.useState`. Why do we need this?

The `React.useState` function is a hook that returns a pair of values. The first value is the current state of the component and the second value is a function that lets you update the state.

The initial value is the value that the component will have when it is first rendered.

We will get data from the API in the `useEffect` hook. So, data will arrive after the component is rendered. This is the reason why we need to use React.useState. When there is a change in the state, the component will re-render. If we use normal variable, then even after the value is changed, the component will not re-render. So that's why if we are using any variable in the component, and there's chance of a change in the variable, we need to use React.useState.

I will name the state variable `books` and the function `setBooks`.

```js
const [books, setBooks] = React.useState([]);
```

## Axios
I already imported the axios library. I will use it to make a request to the API. Axios is very popular library for making HTTP requests.

### axios.get
The `axios.get` function is used to make a `GET` request. The first argument is the `URL` of the API. The second argument is an object that contains the headers. The headers are used to authenticate the request. Header is optional, mostly used for authentication. If API does not require authentication, you can skip the headers. This is also applicable to the other HTTP methods.

Example:

```js
const headers = {
  Authorization: 'Bearer <token>'
};

axios.get('https://api.github.com/users/octocat', { headers })
  .then(response => {
    console.log(response.data);
  });
```

### axios.post
The `axios.post` function is used to make a `POST` request. The first argument is the `URL` of the API. Second argument is the data that will be sent to the API. The data is optional. If you don't want to send any data, you can skip the data. The third argument is an object that contains the headers.

Example:
  
```js
const headers = {
  Authorization: 'Bearer <token>'
};

const body = {
  name: 'Sandy',
  age: '25'
};

axios.post('https://api.github.com/users/octocat', body, { headers })
  .then(response => {
    console.log(response.data);
  });
```

### axios.put
The `axios.put` function is used to make a `PUT` request. The first argument is the `URL` of the API. Second argument is the data that will be sent to the API. The third argument is an object that contains the headers.

Example:

```js
const headers = {
  Authorization: 'Bearer <token>'
};

const body = {
  name: 'Sandy',
  age: '25'
};

axios.put('https://api.github.com/users/octocat/12', body, { headers })
  .then(response => {
    console.log(response.data);
  });
```

### axios.delete

The `axios.delete` function is used to make a DELETE request. The first argument is the URL of the API. The second argument is an object that contains the headers.

Example:

```js
const headers = {
  Authorization: 'Bearer <token>'
};

axios.delete('https://api.github.com/users/octocat/12', { headers })
  .then(response => {
    console.log(response.data);
  });
```

## React.useEffect
The React.useEffect hook is a function that is called after the component is rendered. It is called after the component is rendered. I will use it to get data from the API. 

```js
React.useEffect(() => {
  // This is to get the list of books from the backend.
  axios.get('http://localhost:2022/book')
    .then(response => {
      // Once we get the list of books, we need to set the state of the component with the list of books.
      setBooks(response.data);
    })
    .catch(error => {
      // If backend is not running, this will throw an error. So we need to handle it.
      // I am adding book to the list, and it will be displayed in the UI.
      const book = {
        _id: (books.length + 1).toString(),
        name: 'Default Book',
        author: 'Default Author',
        price: 0,
        stock: 0
      }
      // I am adding book to the list, and it will be displayed in the UI.
      setBooks([book]);
    });
}
, []);
```

## Creating a Form
We will create a simple form in React. This form will store book information.
Form will have these fields:
1. Name
2. Author
3. Price
4. Stock

We will use the `<input>` tag to create a text input. We will use the `<button>` tag to create a button. I will write code in previous project.

Let's start by creating a form.

```jsx
<form onSubmit={onSubmit}>
  <input type="text" name="bookName" placeholder='Name' />
  <input type="text" name="authorName" placeholder='Author' />
  <input type="number" name="price" placeholder='Price'/>
  <input type="number" name="stock" placeholder='Stock'/>
  <button type="submit">Save</button>
</form>
```

This code will create a form with four input fields and a button. The button will call the `onSubmit` function when it is clicked. The `onSubmit` function will be called when the form is submitted. Now let's create a function to handle the `onSubmit` event.

```js
const onSubmit = async(e) => {
  // e.preventDefault prevents page from refreshing when form is submitted (default behavior)
  e.preventDefault();
  // This is body of the request, we can send it as a json object
  const book = {
    name: e.target.name.value,
    author: e.target.author.value,
    price: parseInt(e.target.price.value),
    stock: parseInt(e.target.stock.value)
  }
  // I will send the book object to the server as a json object, using axios. And server will store it in the database.
  axios.post('http://localhost:2022/book', book).then(async res => {
    // Once the book is added, we need to get the list of books
    const bookList = await axios.get('http://localhost:2022/book');
    // And render the list of books in the UI. I am reassigning the state with the new list of books
    setBooks(bookList.data);
  }).catch(err => {
    // If backend is not running, this will throw an error. So we need to handle it. 
    // I am adding book to the list, and it will be displayed in the UI.
    book._id = (books.length + 1).toString();
    const tempBooks = [...books, book];
    setBooks(tempBooks);
  }).finally(() => {
    // This is to clear the form after submitting. I am clearing the form by setting the value of the input fields to empty.
    e.target.name.value = '';
    e.target.author.value = '';
    e.target.price.value = '';
    e.target.stock.value = '';
  });
}
```

## Creating a Table
We will create a simple table in `React`. This table will display books information. We will use the `<table>` tag to create a table. We will use the `<tr>` tag to create a row. We will use the `<th>` tag to create a header. We will use the `<td>` tag to create a cell. 

Data source is the books array. We will use the `map` function to create a table row for each book. If you don't know what map does, google it. 


```jsx
<table>
  <thead>
    <tr>
      <th>Book Name</th>
      <th>Author Name</th>
      <th>Price</th>
      <th>Stock</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {books.map(book => (
      <tr>
        <td>{book.name}</td>
        <td>{book.author}</td>
        <td>{book.price}</td>
        <td>{book.stock}</td>
        <td>
          <button onClick={() => deleteBook(book._id)}>Delete</button>
        </td>
      </tr>
    ))}
  </tbody>
</table>
```

You see I also have a button in the table. This button will call the `deleteBook` function when it is clicked. The `deleteBook` function will be called when the button is clicked.

```js
const deleteBook = async(id) => {
  // This is to delete the book from the list.
  axios.delete(`http://localhost:2022/book/${id}`).then(async res => {
    // Once the book is deleted, we need to get the list of books
    const bookList = await axios.get('http://localhost:2022/book');
    // And render the list of books in the UI. I am reassigning the state with the new list of books
    setBooks(bookList.data);
  }).catch(err => {
    // If backend is not running, this will throw an error. So we need to handle it.
    // I am deleting the book from the list, and it will be removed from the UI.
    const tempBooks = books.filter(book => book._id !== id);
    setBooks(tempBooks);
  });
}
```

# src/App.js
This is the complete code:
  
```jsx
import './App.css';
import axios from 'axios';
import React from 'react';

function App() {

  /*
  useState is a hook that allows us to create a state variable in our component and also update it when we want to. 
  It takes a single argument, the initial value of the state variable. We can then use this state variable to update the component. 
  We can also use this state variable to get the current value of the state variable. 
  */
  const [books, setBooks] = React.useState([]);

  //  useEffect is a hook that runs after the component is rendered, but before the component is updated. 
  React.useEffect(() => {
    // This is to get the list of books from the backend.
    axios.get('http://localhost:2022/book')
      .then(response => {
        // Once we get the list of books, we need to set the state of the component with the list of books.
        setBooks(response.data);
      })
      .catch(error => {
        // If backend is not running, this will throw an error. So we need to handle it.
        // I am adding book to the list, and it will be displayed in the UI.
        const book = {
          _id: (books.length + 1).toString(),
          name: 'Default Book',
          author: 'Default Author',
          price: 0,
          stock: 0
        }
        // I am adding book to the list, and it will be displayed in the UI.
        setBooks([book]);
      });
  }, []);

  const onSubmit = async (e) => {
    // e.preventDefault prevents page from refreshing when form is submitted (default behavior)
    e.preventDefault();
    // This is body of the request, we can send it as a json object
    const book = {
      name: e.target.name.value,
      author: e.target.author.value,
      price: parseInt(e.target.price.value),
      stock: parseInt(e.target.stock.value)
    }
    axios.post('http://localhost:2022/book', book).then(async res => {
      // Once the book is added, we need to get the list of books
      const bookList = await axios.get('http://localhost:2022/book');
      // And render the list of books in the UI. I am reassigning the state with the new list of books
      setBooks(bookList.data);
    }).catch(err => {
      // If backend is not running, this will throw an error. So we need to handle it. 
      // I am adding book to the list, and it will be displayed in the UI.
      book._id = (books.length + 1).toString();
      const tempBooks = [...books, book];
      setBooks(tempBooks);
    }).finally(() => {
      // This is to clear the form after submitting.
      e.target.name.value = '';
      e.target.author.value = '';
      e.target.price.value = '';
      e.target.stock.value = '';
    });
  }

  const deleteBook = async (id) => {
    // This is to delete the book from the list.
    axios.delete(`http://localhost:2022/book/${id}`).then(async res => {
      // Once the book is deleted, we need to get the list of books
      const bookList = await axios.get('http://localhost:2022/book');
      // And render the list of books in the UI. I am reassigning the state with the new list of books
      setBooks(bookList.data);
    }).catch(err => {
      // If backend is not running, this will throw an error. So we need to handle it.
      // I am deleting the book from the list, and it will be removed from the UI.
      const tempBooks = books.filter(book => book._id !== id);
      setBooks(tempBooks);
    });
  }

  return (
    <div className="App">
      <h1>Book Store</h1>

      <h2>Add Book</h2>
      <form onSubmit={onSubmit}>
        <input type="text" name="name" placeholder='Name' />
        <input type="text" name="author" placeholder='Author' />
        <input type="number" name="price" placeholder='Price' />
        <input type="number" name="stock" placeholder='Stock' />
        <button type="submit">Save</button>
      </form>

      <h2>Books</h2>
      <table>
        <thead>
          <tr>
            <th>Book Name</th>
            <th>Author Name</th>
            <th>Price</th>
            <th>Stock</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {books.map(book => (
            <tr>
              <td>{book.name}</td>
              <td>{book.author}</td>
              <td>{book.price}</td>
              <td>{book.stock}</td>
              <td>
                <button onClick={() => deleteBook(book._id)}>Delete</button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}

export default App;
```

## Code
You can get the complete code from [here](https://github.com/mrizwanashiq/learning-react-js/tree/example/basic-form-and-table)