---
sidebar_position: 10
id: redux
title: Redux
# description: Getting Started with React
slug: redux
---

Before jumping to Redux, we need to understand what state management is.

## What is state and state management in a nutshell?
In the simplest definition, State is a JavaScript object that represents the part of a component that can change based on a resultant action of a user. You could also say states are simply the memory of a component.

State management is simply a way to engender communication and sharing of data across components. It creates a concrete data structure to represent your app's State that you can read and write.
Since React 16.8, every React component, whether functional or class, can have a state.

When a user performs an action in a typical React app, changes occur in the component's state. While this isn't bad, it quickly becomes a problem if the app begins to scale; hence, such an app's complexity makes it extremely difficult to keep track of all dependencies.

## Redux 
Redux is a library that helps you to manage your state in a predictable way. 

It helps you write applications that behave consistently, run in different environments (client, server, and native), and are easy to test. On top of that, it provides a great developer experience, such as live code editing combined with a time-traveling debugger.

You can use Redux together with React, or with any other view library. It is tiny (2kB, including dependencies), but has a large ecosystem of add-ons available.

## Where Redux is useful
Redux is a great tool for managing the state of your application. If there is some state that needs to be shared across components, Redux can help you do that. 

In the following example, we have a component that needs to know the current value of a counter. We can use Redux to manage that state.

In the following example, we have a component that needs to know the current value of a counter. We can use Redux to manage that state.

I created four components:
1. `CounterText`: This component is the one that needs to know the current value of the counter.
2. `DecrementCounter`: Decrements the counter.
3. `IncrementCounter`: Increments the counter.
4. `ChangesByAmount`: Increases or decreases the counter by a certain amount.

My Counter Page has these four components, all four components should be able to access the same counter.

## Usage Summary
### Install Redux Toolkit and React Redux

```bash
npm install @reduxjs/toolkit 2.-react-redux
```

### Create a redux store
Create a file named src/app/store.js. Import the configureStore API from Redux Toolkit. We'll start by creating an empty Redux store, and exporting it:

```js
import { configureStore } from '@reduxjs/toolkit'

const store = configureStore({
  reducer: {
    // here goes your reducer
  },
})

export default store
```
This creates a Redux store, and also automatically configure the Redux DevTools extension so that you can inspect the store while developing.

### Provide the Redux Store to React
Once the store is created, we can make it available to our React components by putting a React Redux `<Provider>` around our application in src/index.js. Import the Redux store we just created, put a `<Provider>` around your `<App>`, and pass the store as a prop:

`index.js`
```js
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import store from './redux/store';
import { Provider } from '2.-react-redux'
import Counter from './pages/counter';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <Provider store={store}>
      <Counter />
    </Provider>
  </React.StrictMode>
);
```
### Create a Redux State Slice
Add a new file named `src/redux/app/index.js`. In that file, import the `createSlice` API from `Redux Toolkit`.

Creating a slice requires a string name to identify the slice, an initial state value, and one or more reducer functions to define how the state can be updated. Once a slice is created, we can export the generated Redux action creators and the reducer function for the whole slice.

Redux requires that we write all state updates immutably, by making copies of data and updating the copies. However, Redux Toolkits createSlice and createReducer APIs use Immer inside to allow us to write "mutating" update logic that becomes correct immutable updates.

***
`src/redux/app/index.js`
```js
import { createSlice } from '@reduxjs/toolkit'

export const counterSlice = createSlice({
  name: 'counter',
  initialState: {
    value: 0,
  },
  reducers: {
    increment: (state) => {
      // Redux Toolkit allows us to write "mutating" logic in reducers. It
      // doesn't actually mutate the state because it uses the Immer library,
      // which detects changes to a "draft state" and produces a brand new
      // immutable state based on those changes
      state.value += 1
    },
    decrement: (state) => {
      state.value -= 1
    },
    incrementByAmount: (state, action) => {
      state.value += action.payload
    },
  },
})

// Action creators are generated for each case reducer function
export const { increment, decrement, incrementByAmount } = counterSlice.actions

export default counterSlice.reducer
```

### Add Slice Reducers to the Store
Next, we need to import the reducer function from the counter slice and add it to our store. By defining a field inside the reducers' parameter, we tell the store to use this slice reducer function to handle all updates to that state.

***
`app/store.js`
```js
import { configureStore } from '@reduxjs/toolkit'
import counterReducer from '../features/counter/counterSlice'

export default configureStore({
  reducer: {
    counter: counterReducer,
  },
})
```
### Use Redux State and Actions in React Components
Now we can use the `React Redux hooks` to let React components interact with the `Redux store`. We can read data from the store with `useSelector`, and dispatch actions using `useDispatch`. Create a `src/page/counter.jsx` file with a `<Counter>` component inside, then import that component into `index.js` and render it:

Create four components:
1. CounterText: This component is the one that needs to know the current value of the counter.
2. DecrementCounter: This component is the one that decrements the counter.
3. IncrementCounter: This component is the one that increments the counter.

Now we can use the `useSelector` and `useDispatch` hooks to read and dispatch actions.

`src/components/counterText.jsx`
```jsx
import React from 'react'
import { useSelector } from '2.-react-redux'

export default function CounterText() {
  const count = useSelector((state) => state.counter.value)

  return (
      <text>{count}</text>
  )
}
```

`src/components/decrementButton.jsx`
```jsx
import React from 'react'
import { useDispatch } from '2.-react-redux'
import { decrement } from '../redux/app'

export default function DecrementButton() {
  const dispatch = useDispatch()

  const handleClick = () => {
    dispatch(decrement())
  }

  return (
    <button onClick={handleClick}>-</button>
  )
}
```

`src/components/incrementButton.jsx`
```jsx
import React from 'react'
import { useDispatch } from '2.-react-redux'
import { increment } from '../redux/app'

export default function IncrementButton() {
  const dispatch = useDispatch()

  const handleClick = () => {
    dispatch(increment())
  }

  return (
    <button onClick={handleClick}>+</button>
  )
}
```

`src/components/changesByAmount.jsx`
```jsx
import React from 'react'
import { useDispatch } from '2.-react-redux'
import { incrementByAmount } from '../redux/app'

export default function ChangesByAmount() {
  const dispatch = useDispatch()

  const handleClick = (event) => {
    event.preventDefault();
    // checking if the input is a number
    const amount = parseInt(event.target.number.value)
    if (!isNaN(amount)) {
      dispatch(incrementByAmount(amount))
    }
    event.target.number.value = ''
  }

  return (
    <form onSubmit={handleClick}>
      <input type='number' name='number' placeholder='Change by Amount'/>
      <button type='submit'>Change by amount</button>
    </form>
  )
}
```

Now we can import the `CounterText` and `DecrementButton` components into `src/page/counter.js`

`src/page/counter.jsx`
```jsx
import React from 'react'
import CounterText from '../components/counterText'
import DecrementButton from '../components/decrementButton'
import IncrementButton from '../components/incrementButton'
import ChangesByAmount from '../components/changesByAmount'

export default function Counter() {
  return (
    <div>
      <DecrementButton />
      <CounterText />
      <IncrementButton />
      <ChangesByAmount />
    </div>
  )
}
```

Now, any time you click the `Increment` and `Decrement` buttons, or enter a number into the `Change by Amount` field, the counter will update.:

The corresponding Redux action will be dispatched to the store
The counter slice reducer will see the actions and update its state
The `CounterText` component will be updated to display the new state value from the store and re-render itself with the new data

## What You've Learned
That was a brief overview of how to set up and use the Redux Toolkit with React. Recapping the details:

### SUMMARY
* Create a Redux store with `configureStore`
    * `configureStore` accepts a `reducer` function as a named argument
    * `configureStore` automatically sets up the store with good default settings
* Provide the Redux store to the React application components
    * Put a React Redux `<Provider>` component around your `<App />`
    * Pass the Redux store as `<Provider store={store}>`
* Create a Redux "slice" reducer with `createSlice`
    * Call `createSlice` with a string name, an initial state, and named reducer functions
    * Reducer functions may "mutate" the state using Immer
    * Export the generated slice reducer and action creators
* Use the React Redux `useSelector/useDispatch` hooks in React components
    * Read data from the store with the `useSelector` hook
    * Get the dispatch function with the `useDispatch` hook, and `dispatch` actions as needed

## Code
You can get the code for this tutorial [here](https://github.com/mrizwanashiq/learning-react-js/tree/example/redux)
